var map;function initMap(){var b=new google.maps.Geocoder();map=new google.maps.Map(document.getElementById("map"),{zoom:15,center:{lat:40.3918,lng:-74.3985}});var a=new google.maps.InfoWindow();document.getElementById("submit").addEventListener("click",function(){geocodeAddress(b,map)});ko.applyBindings(myViewModel)}var myViewModel=function(){var e=[];locations=ko.observableArray([{title:"Spotswood High School",location:{lat:40.3986,lng:-74.3888}},{title:"Dunkin' Donuts",location:{lat:40.3943,lng:-74.387}},{title:"ShopRite",location:{lat:40.407455,lng:-74.385594}},]);for(var c=0;c<locations().length;c++){var a=locations()[c].location;var d=locations()[c].title;var b=new google.maps.Marker({position:a,title:d,animation:google.maps.Animation.DROP,id:c});e.push(b);e[c].setMap(null)}setMark=function(){var g=new google.maps.LatLngBounds();for(var f=0;f<e.length;f++){document.getElementById(f).addEventListener("click",function(){var h=(document.getElementById((f).id));alert(h);e[f].setMap(map);g.extend(e[f].position)})}google.maps.event.addListener(map,"zoom_changed",function(){zoomChangeBoundsListener=google.maps.event.addListener(map,"bounds_changed",function(h){if(this.getZoom()>18&&this.initialZoom===true){this.setZoom(18);this.initialZoom=false}google.maps.event.removeListener(zoomChangeBoundsListener)})});map.initialZoom=true;map.fitBounds(g)};removeMark=function(){for(var f=0;f<e.length;f++){if(f===b.id){e[f].setMap(null)}}}};function geocodeAddress(b,c){var a=document.getElementById("address").value;b.geocode({address:a},function(f,e){if(e==="OK"){c.setCenter(f[0].geometry.location);var d=new google.maps.Marker({map:c,position:f[0].geometry.location})}else{alert("Geocode was not successful for the following reason: "+e)}})};